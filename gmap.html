<link rel="stylesheet" type="text/css" href="style.css">

<body>
  <div id="map"></div>
  <script async="async" defer="defer">
    function initMap() {

      // center the map
      var map = new google.maps.Map(document.getElementById('map'), {
        center: { lat: 32.937945, lng: -117.142418 },
        zoom: 9,
        mapTypeId: 'roadmap',
        zoomControl: false,
        scaleControl: false,
        scrollwheel: false,
        disableDoubleClickZoom: true
      });

      // choose map marker icon
      var icon = {
        url: "https://static3.soapyjoescarwash.com/wp-content/uploads/2016/12/sj_locations_locatepointer2.png",
        scaledSize: new google.maps.Size(50, 50),
      };

      var currWindow = false;

      // create event listener and message after click markers
      function attachSecretMessage(marker, secretMessage) {
        var infowindow = new google.maps.InfoWindow({
          content: secretMessage
        });
        // listen for click event
        marker.addListener('click', function () {
          infowindow.open(marker.get('map'), marker);
        });

        google.maps.event.addListener(marker, 'click', function () {
          if (currWindow) {
            currWindow.close();
          }

          currWindow = infowindow;
          infowindow.open(map, marker);
        });

      }

      // create array of messages of addresses for each marker
      var secretMessages = ['<div class="soapy-marker"><h3 class="soapy-title">Oceanside </h3><p class="soapy-address">1980 Oceanside Blvd</p><p class="soapy-city">Oceanside, CA 92054</p><a target="_parent" class="soapy-link" href="/locations/oceanside/">Go to this location</a><img src="/wp-content/uploads/2017/07/icon_tan_arrow_right.png" class="soapy-arrow" alt="navigation arrow"></div>', '<div class="soapy-marker"><h3 class="soapy-title">San Marcos </h3><p class="soapy-address">740 W San Marcos Blvd</p><p class="soapy-city">San Marcos, CA 92078</p><a target="_parent" class="soapy-link" href="/locations/san-marcos/">Go to this location</a><img src="/wp-content/uploads/2017/07/icon_tan_arrow_right.png" class="soapy-arrow" alt="navigation arrow"></div>', '<div class="soapy-marker"><h3 class="soapy-title">Escondido </h3><p class="soapy-address">1300 E Valley Pkwy</p><p class="soapy-city">Escondido, CA 92027</p><a target="_parent" class="soapy-link" href="/locations/escondido/">Go to this location</a><img src="/wp-content/uploads/2017/07/icon_tan_arrow_right.png" class="soapy-arrow" alt="navigation arrow"></div>', '<div class="soapy-marker"><h3 class="soapy-title">Rancho Bernardo </h3><p class="soapy-address">16998 W Bernardo Dr</p><p class="soapy-city">San Diego, CA 92127</p><a target="_parent" class="soapy-link" href="/locations/rancho-bernardo/">Go to this location</a><img src="/wp-content/uploads/2017/07/icon_tan_arrow_right.png" class="soapy-arrow" alt="navigation arrow"></div>', '<div class="soapy-marker"><h3 class="soapy-title">Mira Mesa </h3><p class="soapy-address">6609 Mira Mesa Blvd</p><p class="soapy-city">San Diego, CA 92121</p><a target="_parent" class="soapy-link" href="/locations/sorrento-valley-mira-mesa/">Go to this location</a><img src="/wp-content/uploads/2017/07/icon_tan_arrow_right.png" class="soapy-arrow" alt="navigation arrow"></div>', '<div class="soapy-marker"><h3 class="soapy-title">La Mesa </h3><p class="soapy-address">5322 Jackson Dr</p><p class="soapy-city">La Mesa, CA 91942</p><a target="_parent" class="soapy-link" href="/locations/la-mesa/">Go to this location</a><img src="/wp-content/uploads/2017/07/icon_tan_arrow_right.png" class="soapy-arrow" alt="navigation arrow"></div>', '<div class="soapy-marker"><h3 class="soapy-title">Rancho San Diego </h3><p class="soapy-address">2658 Jamacha Rd</p><p class="soapy-city">El Cajon, CA 92019</p><a target="_parent" class="soapy-link" href="/locations/rancho-san-diego/">Go to this location</a><img src="/wp-content/uploads/2017/07/icon_tan_arrow_right.png" class="soapy-arrow" alt="navigation arrow"></div>', '<div class="soapy-marker"><h3 class="soapy-title">National City </h3><p class="soapy-address">1999 Sweetwater Rd</p><p class="soapy-city">National City, CA 91950</p><a target="_parent" class="soapy-link" href="/locations/national-city/">Go to this location</a><img src="/wp-content/uploads/2017/07/icon_tan_arrow_right.png" class="soapy-arrow" alt="navigation arrow"></div>', '<div class="soapy-marker"><h3 class="soapy-title">Imperial Beach </h3><p class="soapy-address">1350 Palm Ave</p><p class="soapy-city">San Diego, CA 92154</p><a target="_parent" class="soapy-link" href="/locations/imperial-beach/">Go to this location</a><img src="/wp-content/uploads/2017/07/icon_tan_arrow_right.png" class="soapy-arrow" alt="navigation arrow"></div>', '<div class="soapy-marker"><h3 class="soapy-title">San Ysidro </h3><p class="soapy-address">225 W San Ysidro Blvd</p><p class="soapy-city">San Ysidro, CA 92173</p><a target="_parent" class="soapy-link" href="/locations/san-ysidro/">Go to this location</a><img src="/wp-content/uploads/2017/07/icon_tan_arrow_right.png" class="soapy-arrow" alt="navigation arrow"></div>'];

      // create markers for each property listing
      var oceanside = new google.maps.Marker({
        position: new google.maps.LatLng(33.195298, -117.354121),
        map: map,
        icon: icon
      });
      attachSecretMessage(oceanside, secretMessages[0]);

      var sanMarcos = new google.maps.Marker({
        position: new google.maps.LatLng(33.137300, -117.180470),
        map: map,
        icon: icon
      });
      attachSecretMessage(sanMarcos, secretMessages[1]);

      var escondido = new google.maps.Marker({
        position: new google.maps.LatLng(33.131524, -117.065472),
        map: map,
        icon: icon
      });
      attachSecretMessage(escondido, secretMessages[2]);

      var ranchoBernardo = new google.maps.Marker({
        position: new google.maps.LatLng(33.023493, -117.082701),
        map: map,
        icon: icon
      });
      attachSecretMessage(ranchoBernardo, secretMessages[3]);

      var miraMesa = new google.maps.Marker({
        position: new google.maps.LatLng(32.906482, -117.175399),
        map: map,
        icon: icon
      });
      attachSecretMessage(miraMesa, secretMessages[4]);

      var laMesa = new google.maps.Marker({
        position: new google.maps.LatLng(32.776054, -117.015475),
        map: map,
        icon: icon
      });
      attachSecretMessage(laMesa, secretMessages[5]);

      var ranchoSanDiego = new google.maps.Marker({
        position: new google.maps.LatLng(32.744343, -116.934631),
        map: map,
        icon: icon
      });
      attachSecretMessage(ranchoSanDiego, secretMessages[6]);

      var nationalCity = new google.maps.Marker({
        position: new google.maps.LatLng(32.661759, -117.079394),
        map: map,
        icon: icon
      });
      attachSecretMessage(nationalCity, secretMessages[7]);

      var imperialBeach = new google.maps.Marker({
        position: new google.maps.LatLng(32.584443, -117.104637),
        map: map,
        icon: icon
      });
      attachSecretMessage(imperialBeach, secretMessages[8]);

      var sanYsidro = new google.maps.Marker({
        position: new google.maps.LatLng(32.554527, -117.048913),
        map: map,
        icon: icon
      });
      attachSecretMessage(sanYsidro, secretMessages[9]);

      google.maps.event.addDomListener(window, "resize", function () {
        var center = map.getCenter();
        google.maps.event.trigger(map, "resize");
        map.setCenter(center);
      });
    }
  </script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB10zmH7mgF_T2paATNh92XpkwkVwP-WQs&amp;callback=initMap" async="async"
    defer="defer"></script>
</body>

</html>